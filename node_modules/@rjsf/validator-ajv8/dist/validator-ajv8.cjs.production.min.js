"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r=require("lodash/toPath"),e=require("lodash/isObject"),t=require("lodash/clone"),a=require("@rjsf/utils"),i=require("lodash/get"),o=require("ajv"),n=require("ajv-formats");function s(r){return r&&"object"==typeof r&&"default"in r?r:{default:r}}var c=s(r),u=s(e),d=s(t),l=s(i),f=s(o),h=s(n);function v(){return v=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a])}return r},v.apply(this,arguments)}var m={allErrors:!0,multipleOfPrecision:8,strict:!1,verbose:!0},p=/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,y=/^data:([a-z]+\/[a-z0-9-+.]+)?;(?:name=(.*);)?base64,(.*)$/,E=["instancePath","keyword","params","schemaPath","parentSchema"],g=function(){function r(r,e){this.ajv=void 0,this.localizer=void 0,this.ajv=function(r,e,t,i,o){void 0===t&&(t={}),void 0===o&&(o=f.default);var n=new o(v({},m,t));return i?h.default(n,i):!1!==i&&h.default(n),n.addFormat("data-url",y),n.addFormat("color",p),n.addKeyword(a.ADDITIONAL_PROPERTY_FLAG),n.addKeyword(a.RJSF_ADDITONAL_PROPERTIES_FLAG),Array.isArray(r)&&n.addMetaSchema(r),u.default(e)&&Object.keys(e).forEach((function(r){n.addFormat(r,e[r])})),n}(r.additionalMetaSchemas,r.customFormats,r.ajvOptionsOverrides,r.ajvFormatOptions,r.AjvClass),this.localizer=e}var e=r.prototype;return e.toErrorSchema=function(r){var e=new a.ErrorSchemaBuilder;return r.length&&r.forEach((function(r){var t=r.message,a=c.default(r.property);a.length>0&&""===a[0]&&a.splice(0,1),t&&e.addErrors(t,a)})),e.ErrorSchema},e.toErrorList=function(r,e){var t=this;if(void 0===e&&(e=[]),!r)return[];var i=[];return a.ERRORS_KEY in r&&(i=i.concat(r[a.ERRORS_KEY].map((function(r){var t="."+e.join(".");return{property:t,message:r,stack:t+" "+r}})))),Object.keys(r).reduce((function(i,o){return o!==a.ERRORS_KEY&&(i=i.concat(t.toErrorList(r[o],[].concat(e,[o])))),i}),i)},e.createErrorHandler=function(r){var e=this,t={__errors:[],addError:function(r){this.__errors.push(r)}};if(Array.isArray(r))return r.reduce((function(r,t,a){var i;return v({},r,((i={})[a]=e.createErrorHandler(t),i))}),t);if(u.default(r)){var a=r;return Object.keys(a).reduce((function(r,t){var i;return v({},r,((i={})[t]=e.createErrorHandler(a[t]),i))}),t)}return t},e.unwrapErrorHandler=function(r){var e=this;return Object.keys(r).reduce((function(t,i){var o,n;return"addError"===i?t:v({},t,i===a.ERRORS_KEY?((n={})[i]=r[i],n):((o={})[i]=e.unwrapErrorHandler(r[i]),o))}),{})},e.transformRJSFValidationErrors=function(r,e){return void 0===r&&(r=[]),r.map((function(r){var t=r.instancePath,i=r.keyword,o=r.params,n=r.schemaPath,s=r.parentSchema,c=function(r,e){if(null==r)return{};var t,a,i={},o=Object.keys(r);for(a=0;a<o.length;a++)e.indexOf(t=o[a])>=0||(i[t]=r[t]);return i}(r,E).message,u=void 0===c?"":c,d=t.replace(/\//g,"."),f=(d+" "+u).trim();if("missingProperty"in o){var h=o.missingProperty,v=a.getUiOptions(l.default(e,""+(d=d?d+"."+o.missingProperty:o.missingProperty).replace(/^\./,""))).title;if(v)u=u.replace(h,v);else{var m=l.default(s,[a.PROPERTIES_KEY,h,"title"]);m&&(u=u.replace(h,m))}f=u}else{var p=a.getUiOptions(l.default(e,""+d.replace(/^\./,""))).title;if(p)f=("'"+p+"' "+u).trim();else{var y=null==s?void 0:s.title;y&&(f=("'"+y+"' "+u).trim())}}return{name:i,property:d,message:u,params:o,stack:f,schemaPath:n}}))},e.rawValidation=function(r,e){var t,a,i=void 0;r.$id&&(t=this.ajv.getSchema(r.$id));try{void 0===t&&(t=this.ajv.compile(r)),t(e)}catch(r){i=r}return t&&("function"==typeof this.localizer&&this.localizer(t.errors),a=t.errors||void 0,t.errors=null),{errors:a,validationError:i}},e.validateFormData=function(r,e,t,i,o){var n=this.rawValidation(e,r),s=n.validationError,c=this.transformRJSFValidationErrors(n.errors,o);s&&(c=[].concat(c,[{stack:s.message}])),"function"==typeof i&&(c=i(c,o));var u=this.toErrorSchema(c);if(s&&(u=v({},u,{$schema:{__errors:[s.message]}})),"function"!=typeof t)return{errors:c,errorSchema:u};var d=a.getDefaultFormState(this,e,r,e,!0),l=t(d,this.createErrorHandler(d),o),f=this.unwrapErrorHandler(l);return a.mergeValidationData(this,{errors:c,errorSchema:u},f)},e.withIdRefPrefixObject=function(r){for(var e in r){var t=r[e];r[e]=e===a.REF_KEY&&"string"==typeof t&&t.startsWith("#")?"__rjsf_rootSchema"+t:this.withIdRefPrefix(t)}return r},e.withIdRefPrefixArray=function(r){for(var e=0;e<r.length;e++)r[e]=this.withIdRefPrefix(r[e]);return r},e.isValid=function(r,e,t){var a,i=null!=(a=t.$id)?a:"__rjsf_rootSchema";try{void 0===this.ajv.getSchema(i)&&this.ajv.addSchema(t,i);var o,n=this.withIdRefPrefix(r);return n.$id&&(o=this.ajv.getSchema(n.$id)),void 0===o&&(o=this.ajv.compile(n)),o(e)}catch(r){return console.warn("Error encountered compiling schema:",r),!1}finally{this.ajv.removeSchema(i)}},e.withIdRefPrefix=function(r){return Array.isArray(r)?this.withIdRefPrefixArray([].concat(r)):u.default(r)?this.withIdRefPrefixObject(d.default(r)):r},r}();function j(r,e){return void 0===r&&(r={}),new g(r,e)}var R=j();exports.customizeValidator=j,exports.default=R;
//# sourceMappingURL=validator-ajv8.cjs.production.min.js.map
