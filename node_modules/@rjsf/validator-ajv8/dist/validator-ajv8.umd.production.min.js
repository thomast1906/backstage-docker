!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("lodash-es/toPath"),require("lodash-es/isObject"),require("lodash-es/clone"),require("@rjsf/utils"),require("lodash-es/get"),require("ajv"),require("ajv-formats")):"function"==typeof define&&define.amd?define(["exports","lodash-es/toPath","lodash-es/isObject","lodash-es/clone","@rjsf/utils","lodash-es/get","ajv","ajv-formats"],e):e((r="undefined"!=typeof globalThis?globalThis:r||self)["@rjsf/validator-ajv8"]={},r.toPath,r.isObject,r.clone,r.utils,r.get,r.Ajv,r.addFormats)}(this,(function(r,e,t,a,i,o,n,s){"use strict";function c(r){return r&&"object"==typeof r&&"default"in r?r:{default:r}}var d=c(e),u=c(t),l=c(a),f=c(o),h=c(n),v=c(s);function m(){return m=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a])}return r},m.apply(this,arguments)}var p={allErrors:!0,multipleOfPrecision:8,strict:!1,verbose:!0},y=/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,E=/^data:([a-z]+\/[a-z0-9-+.]+)?;(?:name=(.*);)?base64,(.*)$/,j=["instancePath","keyword","params","schemaPath","parentSchema"],g="__rjsf_rootSchema",b=function(){function r(r,e){this.ajv=void 0,this.localizer=void 0,this.ajv=function(r,e,t,a,o){void 0===t&&(t={}),void 0===o&&(o=h.default);var n=new o(m({},p,t));return a?v.default(n,a):!1!==a&&v.default(n),n.addFormat("data-url",E),n.addFormat("color",y),n.addKeyword(i.ADDITIONAL_PROPERTY_FLAG),n.addKeyword(i.RJSF_ADDITONAL_PROPERTIES_FLAG),Array.isArray(r)&&n.addMetaSchema(r),u.default(e)&&Object.keys(e).forEach((function(r){n.addFormat(r,e[r])})),n}(r.additionalMetaSchemas,r.customFormats,r.ajvOptionsOverrides,r.ajvFormatOptions,r.AjvClass),this.localizer=e}var e=r.prototype;return e.toErrorSchema=function(r){var e=new i.ErrorSchemaBuilder;return r.length&&r.forEach((function(r){var t=r.message,a=d.default(r.property);a.length>0&&""===a[0]&&a.splice(0,1),t&&e.addErrors(t,a)})),e.ErrorSchema},e.toErrorList=function(r,e){var t=this;if(void 0===e&&(e=[]),!r)return[];var a=[];return i.ERRORS_KEY in r&&(a=a.concat(r[i.ERRORS_KEY].map((function(r){var t="."+e.join(".");return{property:t,message:r,stack:t+" "+r}})))),Object.keys(r).reduce((function(a,o){return o!==i.ERRORS_KEY&&(a=a.concat(t.toErrorList(r[o],[].concat(e,[o])))),a}),a)},e.createErrorHandler=function(r){var e=this,t={__errors:[],addError:function(r){this.__errors.push(r)}};if(Array.isArray(r))return r.reduce((function(r,t,a){var i;return m({},r,((i={})[a]=e.createErrorHandler(t),i))}),t);if(u.default(r)){var a=r;return Object.keys(a).reduce((function(r,t){var i;return m({},r,((i={})[t]=e.createErrorHandler(a[t]),i))}),t)}return t},e.unwrapErrorHandler=function(r){var e=this;return Object.keys(r).reduce((function(t,a){var o,n;return"addError"===a?t:m({},t,a===i.ERRORS_KEY?((n={})[a]=r[a],n):((o={})[a]=e.unwrapErrorHandler(r[a]),o))}),{})},e.transformRJSFValidationErrors=function(r,e){return void 0===r&&(r=[]),r.map((function(r){var t=r.instancePath,a=r.keyword,o=r.params,n=r.schemaPath,s=r.parentSchema,c=function(r,e){if(null==r)return{};var t,a,i={},o=Object.keys(r);for(a=0;a<o.length;a++)e.indexOf(t=o[a])>=0||(i[t]=r[t]);return i}(r,j).message,d=void 0===c?"":c,u=t.replace(/\//g,"."),l=(u+" "+d).trim();if("missingProperty"in o){var h=o.missingProperty,v=i.getUiOptions(f.default(e,""+(u=u?u+"."+o.missingProperty:o.missingProperty).replace(/^\./,""))).title;if(v)d=d.replace(h,v);else{var m=f.default(s,[i.PROPERTIES_KEY,h,"title"]);m&&(d=d.replace(h,m))}l=d}else{var p=i.getUiOptions(f.default(e,""+u.replace(/^\./,""))).title;if(p)l=("'"+p+"' "+d).trim();else{var y=null==s?void 0:s.title;y&&(l=("'"+y+"' "+d).trim())}}return{name:a,property:u,message:d,params:o,stack:l,schemaPath:n}}))},e.rawValidation=function(r,e){var t,a,i=void 0;r.$id&&(t=this.ajv.getSchema(r.$id));try{void 0===t&&(t=this.ajv.compile(r)),t(e)}catch(r){i=r}return t&&("function"==typeof this.localizer&&this.localizer(t.errors),a=t.errors||void 0,t.errors=null),{errors:a,validationError:i}},e.validateFormData=function(r,e,t,a,o){var n=this.rawValidation(e,r),s=n.validationError,c=this.transformRJSFValidationErrors(n.errors,o);s&&(c=[].concat(c,[{stack:s.message}])),"function"==typeof a&&(c=a(c,o));var d=this.toErrorSchema(c);if(s&&(d=m({},d,{$schema:{__errors:[s.message]}})),"function"!=typeof t)return{errors:c,errorSchema:d};var u=i.getDefaultFormState(this,e,r,e,!0),l=t(u,this.createErrorHandler(u),o),f=this.unwrapErrorHandler(l);return i.mergeValidationData(this,{errors:c,errorSchema:d},f)},e.withIdRefPrefixObject=function(r){for(var e in r){var t=r[e];r[e]=e===i.REF_KEY&&"string"==typeof t&&t.startsWith("#")?g+t:this.withIdRefPrefix(t)}return r},e.withIdRefPrefixArray=function(r){for(var e=0;e<r.length;e++)r[e]=this.withIdRefPrefix(r[e]);return r},e.isValid=function(r,e,t){var a,i=null!=(a=t.$id)?a:g;try{void 0===this.ajv.getSchema(i)&&this.ajv.addSchema(t,i);var o,n=this.withIdRefPrefix(r);return n.$id&&(o=this.ajv.getSchema(n.$id)),void 0===o&&(o=this.ajv.compile(n)),o(e)}catch(r){return console.warn("Error encountered compiling schema:",r),!1}finally{this.ajv.removeSchema(i)}},e.withIdRefPrefix=function(r){return Array.isArray(r)?this.withIdRefPrefixArray([].concat(r)):u.default(r)?this.withIdRefPrefixObject(l.default(r)):r},r}();function O(r,e){return void 0===r&&(r={}),new b(r,e)}var R=O();r.customizeValidator=O,r.default=R,Object.defineProperty(r,"__esModule",{value:!0})}));
//# sourceMappingURL=validator-ajv8.umd.production.min.js.map
